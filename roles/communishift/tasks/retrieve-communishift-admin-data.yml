---
# tasks file for CommunishiftAuthorization
- name: Authorize with kinit
  shell: kinit -k -t "{{ communishift_keytab_path }}" -l 3600 "{{ communishift_keytab_principal }}"
  run_once: true

- name: Retrieve fasjson group/user data based on pattern supplied
  communishift_retrieve_fasjson_project_admin_emails:
    keytab_path: "{{ communishift_keytab_path }}"
    principal: "{{ communishift_keytab_principal }}"
    group_name_pattern: "^communishift-"
  register: communishift_project_emails_fasjson_response
  run_once: true

- name: Debug
  debug:
    msg: "{{ communishift_project_emails_fasjson_response }}"
  run_once: true
