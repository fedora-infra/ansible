---
# Warning: this file is included also from copr-hv playbook(s), so keep the
# source file arguments absolute (not relative to this role)
- name: sync copr provisioning files
  synchronize: src="{{ roles_path }}/copr/backend/files/provision/"
               dest="{{ provision_directory }}/"
  tags:
  - provision_config

- name: "sync copr provisioning files [remove mock config leftovers]"
  synchronize: src="{{ roles_path }}/copr/backend/files/provision/files/mock/"
               dest="{{ provision_directory }}/files/mock/"
               delete=yes
  tags:
  - provision_config

- name: resalloc, generate vars.yml file
  template:
    src: "{{ roles_path }}/copr/backend/templates/provision/{{ item }}"
    dest: "{{ provision_directory }}/{{ item }}"
  with_items:
  - vars.yml
  tags:
  - provision_config
