---
- name: sync copr provisioning files
  synchronize: src="../files/provision/" dest="{{ provision_directory }}/"
  tags:
  - provision_config

- name: "sync copr provisioning files [remove mock config leftovers]"
  synchronize: src="../files/provision/files/mock/" dest="{{ provision_directory }}/files/mock/"
               delete=yes
  tags:
  - provision_config

- name: resalloc, generate vars files
  template:
    src: "../files/provision/{{ item }}"
    dest: "{{ provision_directory }}/{{ item }}"
  with_items:
  - vars.yml
  - nova_cloud_vars.yml
  - aws_cloud_vars.yml
  tags:
  - provision_config

- name: resalloc, rpmbuild config
  template:
    src: ../files/provision/copr-rpmbuild/main.ini.j2
    dest: "{{ provision_directory }}/files/main.ini"
  tags:
  - provision_config

- name: resalloc, rpkg config
  template:
    src: ../files/provision/rpkg.conf.j2
    dest: "{{ provision_directory }}/files/rpkg.conf"
  tags:
  - provision_config
